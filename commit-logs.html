<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/css/a13b559d67687ed0.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-3c60486726093425.js"/><script src="/_next/static/chunks/fd9d1056-42bca7a501e26700.js" async=""></script><script src="/_next/static/chunks/23-0400f1ada3445968.js" async=""></script><script src="/_next/static/chunks/main-app-e0d78c455d046f20.js" async=""></script><script src="/_next/static/chunks/231-6a7b6dfd7bcbf59a.js" async=""></script><script src="/_next/static/chunks/app/layout-9e882b25b1c0b5ce.js" async=""></script><script src="/_next/static/chunks/app/commit-logs/page-fd3077306db8b70a.js" async=""></script><title>Create Next App</title><meta name="description" content="Generated by create next app"/><script src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body class="__variable_1e4310 __variable_c3aa02 antialiased"><nav class="font-mono mx-16"><ul class="relative min-h-32 m-14 mb-10 flex flex-col md:flex-row md:space-x-12 space-y-1 justify-center md:justify-start items-center text-2xl md:text-3xl z-0 tracking-tight text-zinc-900"><li><a href="/">Home</a></li><li><a href="/learning-logs">Learning Logs</a></li><li><a href="/commit-logs">Commit logs</a></li></ul></nav><div class="flex justify-center py-10"><div class="page-background"><div class="flex h-full mr-5"><nav class="min-w-30 font-thin text-lg mr-6"><ul><li class="flex justify-center bg-indigo-800 bg-opacity-65 text-xl text-white font-mono rounded-md m-2 ml-0 px-6 gap-0.5 border-2 border-indigo-950 border-opacity-70 hover:cursor-pointer bg-sky-700 border-cyan-950">ALL</li><li class="flex justify-center bg-indigo-800 bg-opacity-65 text-xl text-white font-mono rounded-md m-2 ml-0 px-6 gap-0.5 border-2 border-indigo-950 border-opacity-70 hover:cursor-pointer bg-sky-700 border-cyan-950"><span>24</span><span>-</span><span>10</span></li><li class="flex justify-center bg-indigo-800 bg-opacity-65 text-xl text-white font-mono rounded-md m-2 ml-0 px-6 gap-0.5 border-2 border-indigo-950 border-opacity-70 hover:cursor-pointer bg-sky-700 border-cyan-950"><span>24</span><span>-</span><span>11</span></li></ul></nav><div class="flex overflow-y-auto"><div class="flex flex-col overflow-y-auto gap-5"><a class="flex flex-col w-full min-w-96 px-10 py-5  rounded-lg bg-white bg-opacity-50 no-underline" href="/commit-logs/241118_commit"><h3 class="text-lg font-normal my-2 mb-0">Github blog 배포 에러 처리하기</h3><p class="flex justify-end">2024-11-18</p><div class="line-clamp-2">Trouble: 배포 에러

github pages를 이용한 github 블로그 배포 중 여러가지 에러가 발생하였습니다.

 배포 에러 1. 타입 에러



generateStaticParams가 반환하는 값의 타입이 { slug: string }[]이어야 하는데, 반환되는 값에 undefined가 포함될 가능성이 있기 때문에 발생하는 오류입니다.

 수정 전 코드

export async function generateStaticParams() {
  const slugs = await getPostTitles({ page: &quot;commit-logs&quot; });

  return slugs?.map((slug) =&gt; ({ slug }));
}


 수정 후 코드

export async function generateStaticParams() {
  const slugs = await getPostTitles({ page: &quot;commit-logs&quot; });

  return (slugs ?? []).map((slug) =&gt; ({ slug }));
}



 배포 에러 2. React Hook 함수의 부적절한 사용



 배포 에러 2-1.

useMDXComponents 라는 React Hook이 getMetadata라는 함수 내에서 호출되고 있는 것이 문제입니다. useMDXComponents 함수의 함수명을 getMDXComponent</div><div class="flex flex-wrap my-2"><span class="bg-blue-500 bg-opacity-80 text-white rounded-xl pb-1 px-3 mr-2 my-1 whitespace-nowrap ">github_blog</span><span class="bg-blue-500 bg-opacity-80 text-white rounded-xl pb-1 px-3 mr-2 my-1 whitespace-nowrap ">deploy</span><span class="bg-blue-500 bg-opacity-80 text-white rounded-xl pb-1 px-3 mr-2 my-1 whitespace-nowrap ">github_pages</span></div></a><a class="flex flex-col w-full min-w-96 px-10 py-5  rounded-lg bg-white bg-opacity-50 no-underline" href="/commit-logs/241115_commit"><h3 class="text-lg font-normal my-2 mb-0">Cart feature 리팩토링</h3><p class="flex justify-end">2024-11-15</p><div class="line-clamp-2">리팩토링1: totalValue 계산을 slice 파일로 옮기기

 코드 수정 전


// Cart.tsx
...
export const Cart = () =&gt; {
  const dispatch = useAppDispatch();
  const { items: itemList, searchTerm } = useAppSelector(selectCart);

  const [itemName, setItemName] = useState&lt;string&gt;(&quot;&quot;);
  const [itemValue, setItemValue] = useState&lt;number&gt;(0);
  const [totalValue, setTotalValue] = useState&lt;number&gt;(0);

  useEffect(() =&gt; {
    setTotalValue(itemList.reduce((acc, item) =&gt; acc + item.value, 0));
  }, [itemList]);
  ...
}



// cartSlice.ts
...
export const selectCart = ({ cart: { searchTerm, items } }: RootState) =&gt; {
  const filteredItems = items.filter((item) =&gt;
    item.name.toLocaleLowerCase().includes(searchTerm.toLowerCa</div><div class="flex flex-wrap my-2"><span class="bg-blue-500 bg-opacity-80 text-white rounded-xl pb-1 px-3 mr-2 my-1 whitespace-nowrap ">react-redux</span><span class="bg-blue-500 bg-opacity-80 text-white rounded-xl pb-1 px-3 mr-2 my-1 whitespace-nowrap ">createSelector</span></div></a><a class="flex flex-col w-full min-w-96 px-10 py-5  rounded-lg bg-white bg-opacity-50 no-underline" href="/commit-logs/241105_commit"><h3 class="text-lg font-normal my-2 mb-0">tailwindcss 동적 클래스 이름(dynamic class name) 사용하기</h3><p class="flex justify-end">2024-11-05</p><div class="line-clamp-2">Trouble: tailwindcss에서 템플릿 리터럴(template literal) 사용이 안 돼요

tailwindcss에서 당연히 가능할 것 같았던 문법이 제대로 동작하지 않습니다. 아래와 같은 템플릿 리터럴 부분입니다.


const bgColor = bg-${color}-300;


문제가 되는 부분의 코드는 아래와 같습니다.


{dayTodos.map((todo, index) =&gt; {
	...
	const topClass = top-${4 + todo.index * 4};
	const bgColor = bg-${todo.color}-300;
	return (
		&lt;div
		  key={index}
		  className={absolute ${topClass} left-0 w-full h-4 z-0 ${bgColor}}&gt;&lt;/div&gt;
	);
	})}


공식 문서를 찾아보면 Don’t use props to build class names dynamically라고 안내하고 있습니다.

class names을 동적으로 사용하면 안되며 항상 완전한 class names를 사용하라고 합니다.


// error code
&lt;div class=&quot;text-{{ error ? &#x27;red&#x27; : &#x27;green&#x27; }}-600&quot;&gt;&lt;/div&gt;



// error code
function Button({ color, children }) {
 </div><div class="flex flex-wrap my-2"><span class="bg-blue-500 bg-opacity-80 text-white rounded-xl pb-1 px-3 mr-2 my-1 whitespace-nowrap ">tailwindcss</span><span class="bg-blue-500 bg-opacity-80 text-white rounded-xl pb-1 px-3 mr-2 my-1 whitespace-nowrap ">dynamic_class_name</span></div></a><a class="flex flex-col w-full min-w-96 px-10 py-5  rounded-lg bg-white bg-opacity-50 no-underline" href="/commit-logs/241009_commit"><h3 class="text-lg font-normal my-2 mb-0">CompileMDX로 frontmatter 데이터 분리하기</h3><p class="flex justify-end">2024-10-09</p><div class="line-clamp-2">Trouble: CompileMDX 함수의 리턴 타입 에러


getMetadata 함수에 리턴 타입 지정을 하지 않았더니 frontmatter 데이터의 title을 출력했을 때 맞는 문자열들이 화면에 출력되기는 하지만 코드 자체에 빨간색으로 에러 표시가 생겼습니다.


async function getMetadata({ source }: { source: string }) {
  return await compileMDX({
    source,
    options: {
      parseFrontmatter: true,
    },
  });
}




그래서 mdx post들의 타입 지정을 하고 getMetadata 함수에 리턴 타입을 할당해 주었습니다.


export type MDXPost = {
  content: string;
  frontmatter: { title: string; date: string; tags: string[] };
};



async function getMetadata({
  source,
}: {
  source: string;
}): Promise&lt;CompileMDXResult&lt;MDXPost&gt;&gt; {
  return await compileMDX({
    source,
    options: {
      parseFrontmatter: true,
    },
  });
}


그런데 </div><div class="flex flex-wrap my-2"><span class="bg-blue-500 bg-opacity-80 text-white rounded-xl pb-1 px-3 mr-2 my-1 whitespace-nowrap ">nextjs</span><span class="bg-blue-500 bg-opacity-80 text-white rounded-xl pb-1 px-3 mr-2 my-1 whitespace-nowrap ">typescript</span></div></a><a class="flex flex-col w-full min-w-96 px-10 py-5  rounded-lg bg-white bg-opacity-50 no-underline" href="/commit-logs/241008_commit"><h3 class="text-lg font-normal my-2 mb-0">마크다운 인라인 코드(inline code)의 백틱 표시 제거하기</h3><p class="flex justify-end">2024-10-08</p><div class="line-clamp-2">Trouble: 왜 자꾸 백틱(\)이 화면에 나타날까요?



mdx 파일에서는 inline code로 감싸져 효과만 주던 백틱이 MDXRemote 로 렌더링 된 후에는 백틱까지 화면에 나타납니다.

&lt;MDXRemote /&gt;는 MDX 콘텐츠를 HTML로 변환하여 화면에 렌더링되도록 해주는 함수입니다.

삼중 백틱(\\\\)의 경우 &lt;pre&gt;&lt;code&gt;...&lt;/code&gt;&lt;/pre&gt;로 변환되지만 와 백틱 하나(\)의 경우 &lt;code&gt;...&lt;/code&gt;로 변환됩니다.

그런데 화면에 렌더링 시, 삼중 백틱은 나타나지 않지만 백틱은 나타납니다. 



보기에 좋지가 않기에 인라인 코드 좌우의 단일 백틱 제거가 필요합니다.



 Trouble 원인 찾기

 가설1. MDXRemote가 백틱을 포함한 html element 로 변환해 주는 걸까요?

이유는 알 수 없지만 MDXRemote 가 백틱을 단순히 &lt;code&gt;...&lt;/code&gt;가 아닌 &lt;code&gt;\...\&lt;/code&gt;로 변환해주는 문제인지 테스트를 해봅니다.

mdx-components.tsx 파일 내 code 부분에 정규표현식을 이용하여 백틱 문자 제거 후 렌더링하여 봅니다.

export function useMDXComponents(components: MDXComponents): MDXComponents {

  return {
    ...,
	code: ({ children</div><div class="flex flex-wrap my-2"><span class="bg-blue-500 bg-opacity-80 text-white rounded-xl pb-1 px-3 mr-2 my-1 whitespace-nowrap ">nextjs</span><span class="bg-blue-500 bg-opacity-80 text-white rounded-xl pb-1 px-3 mr-2 my-1 whitespace-nowrap ">markdown</span><span class="bg-blue-500 bg-opacity-80 text-white rounded-xl pb-1 px-3 mr-2 my-1 whitespace-nowrap ">html</span><span class="bg-blue-500 bg-opacity-80 text-white rounded-xl pb-1 px-3 mr-2 my-1 whitespace-nowrap ">prose</span></div></a><a class="flex flex-col w-full min-w-96 px-10 py-5  rounded-lg bg-white bg-opacity-50 no-underline" href="/commit-logs/241006-241007_commit"><h3 class="text-lg font-normal my-2 mb-0">블로그 포스트 내 이미지 띄우기(with supabase)</h3><p class="flex justify-end">2024-10-07</p><div class="line-clamp-2">getMDXPosts는 posts 버킷의 mdx 폴더의 파일 리스트를 가져와 해당 파일들을 다운로드 후 텍스트 변환하고 string[] 타입으로 반환하는 함수입니다.
 
javascript
export async function getMDXPosts() {
  const { data: fileList, error } = await supabase.storage
    .from(&quot;posts&quot;)
    .list(&quot;mdx&quot;);

  if (error) {
    console.error(&quot;Error occurred while loading the file list:&quot;, error.message);
    return [];
  }

  const posts = [];

  for (const file of fileList) {
    const { data, error } = await supabase.storage
      .from(&quot;posts&quot;)
      .download(mdx/${file.name});

    if (error) {
      console.error(Error downloading file ${file.name}:, error.message);
      continue;
    }
    const text = await data.text();
    posts.push(text);
  }

  ret</div><div class="flex flex-wrap my-2"><span class="bg-blue-500 bg-opacity-80 text-white rounded-xl pb-1 px-3 mr-2 my-1 whitespace-nowrap ">supabase</span><span class="bg-blue-500 bg-opacity-80 text-white rounded-xl pb-1 px-3 mr-2 my-1 whitespace-nowrap ">nextjs</span><span class="bg-blue-500 bg-opacity-80 text-white rounded-xl pb-1 px-3 mr-2 my-1 whitespace-nowrap ">react</span><span class="bg-blue-500 bg-opacity-80 text-white rounded-xl pb-1 px-3 mr-2 my-1 whitespace-nowrap ">regular</span><span class="bg-blue-500 bg-opacity-80 text-white rounded-xl pb-1 px-3 mr-2 my-1 whitespace-nowrap ">expression</span><span class="bg-blue-500 bg-opacity-80 text-white rounded-xl pb-1 px-3 mr-2 my-1 whitespace-nowrap ">sql</span></div></a></div></div></div></div></div><script src="/_next/static/chunks/webpack-3c60486726093425.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/css/a13b559d67687ed0.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"2:I[5751,[],\"\"]\n5:I[9275,[],\"\"]\n6:I[1343,[],\"\"]\n7:I[5767,[\"231\",\"static/chunks/231-6a7b6dfd7bcbf59a.js\",\"185\",\"static/chunks/app/layout-9e882b25b1c0b5ce.js\"],\"PostProvider\",1]\n8:I[231,[\"231\",\"static/chunks/231-6a7b6dfd7bcbf59a.js\",\"185\",\"static/chunks/app/layout-9e882b25b1c0b5ce.js\"],\"\"]\na:I[6130,[],\"\"]\nb:[]\n"])</script><script>self.__next_f.push([1,"0:[\"$\",\"$L2\",null,{\"buildId\":\"-_yrk7eBypDcB9WxxWMI2\",\"assetPrefix\":\"\",\"urlParts\":[\"\",\"commit-logs\"],\"initialTree\":[\"\",{\"children\":[\"commit-logs\",{\"children\":[\"__PAGE__\",{}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"commit-logs\",{\"children\":[\"__PAGE__\",{},[[\"$L3\",\"$L4\",null],null],null]},[null,[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"commit-logs\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L6\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/a13b559d67687ed0.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"$L7\",null,{\"children\":[\"$\",\"body\",null,{\"className\":\"__variable_1e4310 __variable_c3aa02 antialiased\",\"children\":[[\"$\",\"nav\",null,{\"className\":\"font-mono mx-16\",\"children\":[\"$\",\"ul\",null,{\"className\":\"relative min-h-32 m-14 mb-10 flex flex-col md:flex-row md:space-x-12 space-y-1 justify-center md:justify-start items-center text-2xl md:text-3xl z-0 tracking-tight text-zinc-900\",\"children\":[[\"$\",\"li\",null,{\"children\":[\"$\",\"$L8\",null,{\"href\":\"/\",\"children\":\"Home\"}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"$L8\",null,{\"href\":\"/learning-logs\",\"children\":\"Learning Logs\"}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"$L8\",null,{\"href\":\"/commit-logs\",\"children\":\"Commit logs\"}]}]]}]}],[\"$\",\"div\",null,{\"className\":\"flex justify-center py-10\",\"children\":[\"$\",\"div\",null,{\"className\":\"page-background\",\"children\":[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L6\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[]}]}]}]]}]}]}]],null],null],\"couldBeIntercepted\":false,\"initialHead\":[null,\"$L9\"],\"globalErrorComponent\":\"$a\",\"missingSlots\":\"$Wb\"}]\n"])</script><script>self.__next_f.push([1,"9:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Create Next App\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"Generated by create next app\"}]]\n3:null\n"])</script><script>self.__next_f.push([1,"c:I[9077,[\"231\",\"static/chunks/231-6a7b6dfd7bcbf59a.js\",\"521\",\"static/chunks/app/commit-logs/page-fd3077306db8b70a.js\"],\"DateFilterNav\",1]\nd:I[9859,[\"231\",\"static/chunks/231-6a7b6dfd7bcbf59a.js\",\"521\",\"static/chunks/app/commit-logs/page-fd3077306db8b70a.js\"],\"default\",1]\n"])</script><script>self.__next_f.push([1,"4:[\"$\",\"div\",null,{\"className\":\"flex h-full mr-5\",\"children\":[[\"$\",\"$Lc\",null,{\"postDates\":[\"2024-11-18\",\"2024-11-15\",\"2024-11-05\",\"2024-10-09\",\"2024-10-08\",\"2024-10-07\"],\"className\":\"bg-sky-700 border-cyan-950\"}],[\"$\",\"div\",null,{\"className\":\"flex overflow-y-auto\",\"children\":[\"$\",\"$Ld\",null,{\"postSummaries\":[{\"frontmatter\":{\"title\":\"Github blog 배포 에러 처리하기\",\"created_at\":\"2024-11-18\",\"updated_at\":\"2024-11-18\",\"tags\":[\"github_blog\",\"deploy\",\"github_pages\"]},\"preview\":\"Trouble: 배포 에러\\n\\ngithub pages를 이용한 github 블로그 배포 중 여러가지 에러가 발생하였습니다.\\n\\n 배포 에러 1. 타입 에러\\n\\n\\n\\ngenerateStaticParams가 반환하는 값의 타입이 { slug: string }[]이어야 하는데, 반환되는 값에 undefined가 포함될 가능성이 있기 때문에 발생하는 오류입니다.\\n\\n 수정 전 코드\\n\\nexport async function generateStaticParams() {\\n  const slugs = await getPostTitles({ page: \\\"commit-logs\\\" });\\n\\n  return slugs?.map((slug) =\u003e ({ slug }));\\n}\\n\\n\\n 수정 후 코드\\n\\nexport async function generateStaticParams() {\\n  const slugs = await getPostTitles({ page: \\\"commit-logs\\\" });\\n\\n  return (slugs ?? []).map((slug) =\u003e ({ slug }));\\n}\\n\\n\\n\\n 배포 에러 2. React Hook 함수의 부적절한 사용\\n\\n\\n\\n 배포 에러 2-1.\\n\\nuseMDXComponents 라는 React Hook이 getMetadata라는 함수 내에서 호출되고 있는 것이 문제입니다. useMDXComponents 함수의 함수명을 getMDXComponent\",\"fileNameWithoutExtension\":\"241118_commit\"},{\"frontmatter\":{\"title\":\"Cart feature 리팩토링\",\"created_at\":\"2024-11-15\",\"updated_at\":\"2024-11-15\",\"tags\":[\"react-redux\",\"createSelector\"]},\"preview\":\"리팩토링1: totalValue 계산을 slice 파일로 옮기기\\n\\n 코드 수정 전\\n\\n\\n// Cart.tsx\\n...\\nexport const Cart = () =\u003e {\\n  const dispatch = useAppDispatch();\\n  const { items: itemList, searchTerm } = useAppSelector(selectCart);\\n\\n  const [itemName, setItemName] = useState\u003cstring\u003e(\\\"\\\");\\n  const [itemValue, setItemValue] = useState\u003cnumber\u003e(0);\\n  const [totalValue, setTotalValue] = useState\u003cnumber\u003e(0);\\n\\n  useEffect(() =\u003e {\\n    setTotalValue(itemList.reduce((acc, item) =\u003e acc + item.value, 0));\\n  }, [itemList]);\\n  ...\\n}\\n\\n\\n\\n// cartSlice.ts\\n...\\nexport const selectCart = ({ cart: { searchTerm, items } }: RootState) =\u003e {\\n  const filteredItems = items.filter((item) =\u003e\\n    item.name.toLocaleLowerCase().includes(searchTerm.toLowerCa\",\"fileNameWithoutExtension\":\"241115_commit\"},{\"frontmatter\":{\"title\":\"tailwindcss 동적 클래스 이름(dynamic class name) 사용하기\",\"created_at\":\"2024-11-05\",\"updated_at\":\"2024-11-05\",\"tags\":[\"tailwindcss\",\"dynamic_class_name\"]},\"preview\":\"Trouble: tailwindcss에서 템플릿 리터럴(template literal) 사용이 안 돼요\\n\\ntailwindcss에서 당연히 가능할 것 같았던 문법이 제대로 동작하지 않습니다. 아래와 같은 템플릿 리터럴 부분입니다.\\n\\n\\nconst bgColor = bg-${color}-300;\\n\\n\\n문제가 되는 부분의 코드는 아래와 같습니다.\\n\\n\\n{dayTodos.map((todo, index) =\u003e {\\n\\t...\\n\\tconst topClass = top-${4 + todo.index * 4};\\n\\tconst bgColor = bg-${todo.color}-300;\\n\\treturn (\\n\\t\\t\u003cdiv\\n\\t\\t  key={index}\\n\\t\\t  className={absolute ${topClass} left-0 w-full h-4 z-0 ${bgColor}}\u003e\u003c/div\u003e\\n\\t);\\n\\t})}\\n\\n\\n공식 문서를 찾아보면 Don’t use props to build class names dynamically라고 안내하고 있습니다.\\n\\nclass names을 동적으로 사용하면 안되며 항상 완전한 class names를 사용하라고 합니다.\\n\\n\\n// error code\\n\u003cdiv class=\\\"text-{{ error ? 'red' : 'green' }}-600\\\"\u003e\u003c/div\u003e\\n\\n\\n\\n// error code\\nfunction Button({ color, children }) {\\n \",\"fileNameWithoutExtension\":\"241105_commit\"},{\"frontmatter\":{\"title\":\"CompileMDX로 frontmatter 데이터 분리하기\",\"created_at\":\"2024-10-09\",\"updated_at\":\"2024-10-09\",\"tags\":[\"nextjs\",\"typescript\"]},\"preview\":\"Trouble: CompileMDX 함수의 리턴 타입 에러\\n\\n\\ngetMetadata 함수에 리턴 타입 지정을 하지 않았더니 frontmatter 데이터의 title을 출력했을 때 맞는 문자열들이 화면에 출력되기는 하지만 코드 자체에 빨간색으로 에러 표시가 생겼습니다.\\n\\n\\nasync function getMetadata({ source }: { source: string }) {\\n  return await compileMDX({\\n    source,\\n    options: {\\n      parseFrontmatter: true,\\n    },\\n  });\\n}\\n\\n\\n\\n\\n그래서 mdx post들의 타입 지정을 하고 getMetadata 함수에 리턴 타입을 할당해 주었습니다.\\n\\n\\nexport type MDXPost = {\\n  content: string;\\n  frontmatter: { title: string; date: string; tags: string[] };\\n};\\n\\n\\n\\nasync function getMetadata({\\n  source,\\n}: {\\n  source: string;\\n}): Promise\u003cCompileMDXResult\u003cMDXPost\u003e\u003e {\\n  return await compileMDX({\\n    source,\\n    options: {\\n      parseFrontmatter: true,\\n    },\\n  });\\n}\\n\\n\\n그런데 \",\"fileNameWithoutExtension\":\"241009_commit\"},{\"frontmatter\":{\"title\":\"마크다운 인라인 코드(inline code)의 백틱 표시 제거하기\",\"created_at\":\"2024-10-08\",\"updated_at\":\"2024-10-08\",\"tags\":[\"nextjs\",\"markdown\",\"html\",\"prose\"]},\"preview\":\"Trouble: 왜 자꾸 백틱(\\\\)이 화면에 나타날까요?\\n\\n\\n\\nmdx 파일에서는 inline code로 감싸져 효과만 주던 백틱이 MDXRemote 로 렌더링 된 후에는 백틱까지 화면에 나타납니다.\\n\\n\u003cMDXRemote /\u003e는 MDX 콘텐츠를 HTML로 변환하여 화면에 렌더링되도록 해주는 함수입니다.\\n\\n삼중 백틱(\\\\\\\\\\\\\\\\)의 경우 \u003cpre\u003e\u003ccode\u003e...\u003c/code\u003e\u003c/pre\u003e로 변환되지만 와 백틱 하나(\\\\)의 경우 \u003ccode\u003e...\u003c/code\u003e로 변환됩니다.\\n\\n그런데 화면에 렌더링 시, 삼중 백틱은 나타나지 않지만 백틱은 나타납니다. \\n\\n\\n\\n보기에 좋지가 않기에 인라인 코드 좌우의 단일 백틱 제거가 필요합니다.\\n\\n\\n\\n Trouble 원인 찾기\\n\\n 가설1. MDXRemote가 백틱을 포함한 html element 로 변환해 주는 걸까요?\\n\\n이유는 알 수 없지만 MDXRemote 가 백틱을 단순히 \u003ccode\u003e...\u003c/code\u003e가 아닌 \u003ccode\u003e\\\\...\\\\\u003c/code\u003e로 변환해주는 문제인지 테스트를 해봅니다.\\n\\nmdx-components.tsx 파일 내 code 부분에 정규표현식을 이용하여 백틱 문자 제거 후 렌더링하여 봅니다.\\n\\nexport function useMDXComponents(components: MDXComponents): MDXComponents {\\n\\n  return {\\n    ...,\\n\\tcode: ({ children\",\"fileNameWithoutExtension\":\"241008_commit\"},{\"frontmatter\":{\"title\":\"블로그 포스트 내 이미지 띄우기(with supabase)\",\"created_at\":\"2024-10-07\",\"updated_at\":\"2024-10-07\",\"tags\":[\"supabase\",\"nextjs\",\"react\",\"regular\",\"expression\",\"sql\"]},\"preview\":\"getMDXPosts는 posts 버킷의 mdx 폴더의 파일 리스트를 가져와 해당 파일들을 다운로드 후 텍스트 변환하고 string[] 타입으로 반환하는 함수입니다.\\n \\njavascript\\nexport async function getMDXPosts() {\\n  const { data: fileList, error } = await supabase.storage\\n    .from(\\\"posts\\\")\\n    .list(\\\"mdx\\\");\\n\\n  if (error) {\\n    console.error(\\\"Error occurred while loading the file list:\\\", error.message);\\n    return [];\\n  }\\n\\n  const posts = [];\\n\\n  for (const file of fileList) {\\n    const { data, error } = await supabase.storage\\n      .from(\\\"posts\\\")\\n      .download(mdx/${file.name});\\n\\n    if (error) {\\n      console.error(Error downloading file ${file.name}:, error.message);\\n      continue;\\n    }\\n    const text = await data.text();\\n    posts.push(text);\\n  }\\n\\n  ret\",\"fileNameWithoutExtension\":\"241006-241007_commit\"}]}]}]]}]\n"])</script></body></html>