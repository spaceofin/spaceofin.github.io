<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/css/ec8169d84bc91095.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-cceda007551b34ac.js"/><script src="/_next/static/chunks/fd9d1056-42bca7a501e26700.js" async=""></script><script src="/_next/static/chunks/23-0400f1ada3445968.js" async=""></script><script src="/_next/static/chunks/main-app-e0d78c455d046f20.js" async=""></script><script src="/_next/static/chunks/231-6a7b6dfd7bcbf59a.js" async=""></script><script src="/_next/static/chunks/app/layout-c9173ec0898b2734.js" async=""></script><title>Spaceofin Logs</title><meta name="description" content="A blog for study logs"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="256x256"/><script src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body><nav class="font-mono mx-16"><ul class="relative min-h-32 mt-14 mb-10 mx-2 sm:mx-12 lg:mx-14 flex flex-col md:flex-row md:space-x-12 lg:space-x-16 space-y-1 md:space-y-0 justify-center md:justify-start items-start sm:items-center md:items-center text-2xl md:text-3xl z-0 tracking-tight text-zinc-900 pl-4 sm:pl-0"><li><a href="/">Home</a></li><li><a href="/learning-logs">Learning Logs</a></li><li><a href="/commit-logs">Commit Logs</a></li></ul></nav><div class="flex justify-center py-10"><div class="page-background"><div class="flex flex-col prose dark:prose-invert w-full h-full max-h-none overflow-visible px-4"><h1 class="my-20 text-4xl">Page Router에서의 데이터 페칭 함수들 실습해보기(in Next.js)</h1>
<p>Page Router 방식에서 사용하는 다음의 데이터 페칭 함수들에 대한 실습을 진행합니다.</p>
<ul>
<li><code>getServerSideProps</code></li>
<li><code>getStaticProps</code></li>
<li><code>getStaticPaths</code></li>
</ul>
<p><code>getServerSideProps</code>는 <code>SSR</code>에, <code>getStaticProps</code>와 <code>getStaticPaths</code>는 <code>SSG</code>에 사용됩니다.
<code>SSR</code>과의 비교를 위해 <code>CSR</code>의 경우도 함께 실습합니다.</p>
<h2 class="mt-20 text-3xl text-blue-900">Client Side Rendering(with dynamic routes)</h2>
<p><code>page router</code> 방식에서 일반적인 <code>Dynamic Routes</code> 구현에 <code>useRouter</code>를 사용합니다.
아래는 클라이언트 사이드에서의 데이터 페칭을 위해 useEffect 내부에서 fetch 함수를 사용하고 가져온 데이터를 post 상태 변수에 할당하는 코드입니다.</p>
<pre><code>// src/pages/posts-csr/[id].tsx
import { useRouter } from &quot;next/router&quot;;
import { useEffect, useState } from &quot;react&quot;;
import { Post } from &quot;../types/posts&quot;;

export default function PostDetail() {
  const router = useRouter();
  const { id } = router.query;

  const [post, setPost] = useState&lt;Post | null&gt;(null);
  const [loading, setLoading] = useState(true);

  useEffect(() =&gt; {
    if (id) {
      setLoading(true);
      fetch(`https://jsonplaceholder.typicode.com/posts/${id}`)
        .then((response) =&gt; response.json())
        .then((data) =&gt; {
          setPost(data);
          setLoading(false);
        })
        .catch(() =&gt; {
          setLoading(false);
        });
    }
  }, [id]);

  if (loading) return &lt;div&gt;Loading...&lt;/div&gt;;
  if (!post) return &lt;div&gt;Post not found&lt;/div&gt;;

  return (
    &lt;div&gt;
      &lt;h1&gt;{post.title}&lt;/h1&gt;
      &lt;p&gt;{post.body}&lt;/p&gt;
    &lt;/div&gt;
  );
}

</code></pre>
<p><code>/posts-csr/1</code> 페이지에 접속 시 클라이언트 측에서 서버로부터 전송 받는 html 파일은 아래와 같습니다.
<code>&lt;div&gt;Loading...&lt;/div&gt;</code>만 담겨져 있고 실질적인 데이터는 아직 담겨 있지 않습니다.</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot; /&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width&quot; /&gt;
    &lt;meta name=&quot;next-head-count&quot; content=&quot;2&quot; /&gt;
    &lt;title&gt;Page Router Practice&lt;/title&gt;
    &lt;link ... /&gt;
    ...
    &lt;script ... &gt;&lt;/script&gt;
    ...
  &lt;/head&gt;
  &lt;body&gt;
	  &lt;div id=&quot;__next&quot;&gt;&lt;div&gt;Loading...&lt;/div&gt;&lt;/div&gt;
    &lt;script id=&quot;__NEXT_DATA__&quot; type=&quot;application/json&quot; crossorigin=&quot;&quot;&gt;
      {
        &quot;props&quot;: { &quot;pageProps&quot;: {} },
        &quot;page&quot;: &quot;/posts-csr/[id]&quot;,
        &quot;query&quot;: {},
        &quot;buildId&quot;: &quot;7GLf-bloOy3f3Es1FFa0B&quot;,
        &quot;nextExport&quot;: true,
        &quot;autoExport&quot;: true,
        &quot;isFallback&quot;: false,
        &quot;scriptLoader&quot;: []
      }
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p><code>posts-csr/1</code> 페이지 로드 후 클라이언트 사이드 렌더링이 일어나며 API 로부터 fetch 해온 json 데이터가 화면에 렌더링되었습니다.</p>
<p>[not found image]</p>
<p>[not found image]</p>
<h2 class="mt-20 text-3xl text-blue-900">Static Site Generation(with dynamic routes)</h2>
<p><code>SSG</code> 방식의 Dynamic Routes 구현을 위해서는 <code>getStaticProps</code>와 <code>getStaticPaths</code>를 함께 사용합니다.</p>
<pre><code>// src/pages/posts-ssg/[id].tsx
import { GetStaticProps, GetStaticPaths, InferGetStaticPropsType } from &quot;next&quot;;
import { Post } from &quot;../types/posts&quot;;

export const getStaticPaths = (async () =&gt; {
  const response = await fetch(&quot;https://jsonplaceholder.typicode.com/posts&quot;);
  const posts: Post[] = await response.json();

  const paths = posts.map((post) =&gt; ({
    params: { id: post.id.toString() },
  }));

  return { paths, fallback: &quot;blocking&quot; };
}) satisfies GetStaticPaths;

export const getStaticProps = (async (context) =&gt; {
  const { id } = context.params as { id: string };

  try {
    const response = await fetch(
      `https://jsonplaceholder.typicode.com/posts/${id}`
    );
    const post = await response.json();

    if (!post) {
      return {
        notFound: true,
      };
    }

    return {
      props: { post },
    };
  } catch (error) {
    return {
      props: {
        post: null,
      },
    };
  }
}) satisfies GetStaticProps&lt;{ post: Post }&gt;;

export default function PostDetail({
  post,
}: InferGetStaticPropsType&lt;typeof getStaticProps&gt;) {
  if (!post) return &lt;div&gt;Post not found&lt;/div&gt;;

  return (
    &lt;div&gt;
      &lt;h1&gt;{post.title}&lt;/h1&gt;
      &lt;p&gt;{post.body}&lt;/p&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<p><code>/posts-ssg/1</code> 페이지에 접속 시 클라이언트 측에서 서버로부터 전송 받는 html 파일은 아래와 같습니다.
실질적인 데이터가 이미 html 파일에 담겨 있습니다. <code>build time</code>에 미리 정적으로 생성된 페이지입니다.</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot; /&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width&quot; /&gt;
    &lt;meta name=&quot;next-head-count&quot; content=&quot;2&quot; /&gt;
    &lt;title&gt;Page Router Practice&lt;/title&gt;
    &lt;link ... /&gt;
    ...
    &lt;script ... &gt;&lt;/script&gt;
    ...
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div id=&quot;__next&quot;&gt;
      &lt;div&gt;
        &lt;h1&gt;
          sunt aut facere repellat provident occaecati excepturi optio
          reprehenderit
        &lt;/h1&gt;
        &lt;p&gt;
          quia et suscipit suscipit recusandae consequuntur expedita et cum
          reprehenderit molestiae ut ut quas totam nostrum rerum est autem sunt
          rem eveniet architecto
        &lt;/p&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;script id=&quot;__NEXT_DATA__&quot; type=&quot;application/json&quot; crossorigin=&quot;&quot;&gt;
      {
        &quot;props&quot;: {
          &quot;pageProps&quot;: {
            &quot;post&quot;: {
              &quot;userId&quot;: 1,
              &quot;id&quot;: 1,
              &quot;title&quot;: &quot;sunt aut facere repellat provident occaecati excepturi optio reprehenderit&quot;,
              &quot;body&quot;: &quot;quia et suscipit\nsuscipit recusandae consequuntur expedita et cum\nreprehenderit molestiae ut ut quas totam\nnostrum rerum est autem sunt rem eveniet architecto&quot;
            }
          },
          &quot;__N_SSG&quot;: true
        },
        &quot;page&quot;: &quot;/posts-ssg/[id]&quot;,
        &quot;query&quot;: { &quot;id&quot;: &quot;1&quot; },
        &quot;buildId&quot;: &quot;7GLf-bloOy3f3Es1FFa0B&quot;,
        &quot;isFallback&quot;: false,
        &quot;gsp&quot;: true,
        &quot;scriptLoader&quot;: []
      }
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>[not found image]</p>
<p><code>&quot;__N_SSG&quot;: true</code> 부분과 <code>&quot;gsp&quot;: true,</code>부분에서 SSG이며 <code>getStaticProps</code>를 사용했음을 알 수 있습니다.</p>
<h2 class="mt-20 text-3xl text-blue-900">Server Side Rendering(with dynamic routes)</h2>
<p><code>SSG</code> 방식의 Dynamic Routes 구현을 위해서는 <code>getServerSideProps</code>를 사용합니다.</p>
<pre><code>import { GetServerSideProps, InferGetServerSidePropsType } from &quot;next&quot;;
import { Post } from &quot;../types/posts&quot;;

export const getServerSideProps = (async (context) =&gt; {
  const { id } = context.params as { id: string };

  try {
    const response = await fetch(
      `https://jsonplaceholder.typicode.com/posts/${id}`
    );
    const post = await response.json();

    if (!post) {
      return {
        notFound: true,
      };
    }

    return {
      props: { post },
    };
  } catch (error) {
    return {
      props: {
        post: null,
      },
    };
  }
}) satisfies GetServerSideProps&lt;{ post: Post }&gt;;

export default function PostDetail({
  post,
}: InferGetServerSidePropsType&lt;typeof getServerSideProps&gt;) {
  if (!post) return &lt;div&gt;Post not found&lt;/div&gt;;

  return (
    &lt;div&gt;
      &lt;h1&gt;{post.title}&lt;/h1&gt;
      &lt;p&gt;{post.body}&lt;/p&gt;
    &lt;/div&gt;
  );
}

</code></pre>
<p><code>/posts-ssr/1</code> 페이지에 접속 시 클라이언트 측에서 서버로부터 전송 받는 html 파일은 아래와 같습니다.
SSG 케이스와 마찬가지로 실질적인 데이터가 이미 html 파일에 담겨 있습니다. 하지만 이는 build time에 정적으로 생성된 페이지가 아닙니다. <code>request time</code>에 생성되어 서버로부터 전송받은 페이지입니다.</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot; /&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width&quot; /&gt;
    &lt;meta name=&quot;next-head-count&quot; content=&quot;2&quot; /&gt;
    &lt;title&gt;Page Router Practice&lt;/title&gt;
    &lt;link ... /&gt;
    ...
    &lt;script ...&gt;&lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div id=&quot;__next&quot;&gt;
      &lt;div&gt;
        &lt;h1&gt;
          sunt aut facere repellat provident occaecati excepturi optio
          reprehenderit
        &lt;/h1&gt;
        &lt;p&gt;
          quia et suscipit suscipit recusandae consequuntur expedita et cum
          reprehenderit molestiae ut ut quas totam nostrum rerum est autem sunt
          rem eveniet architecto
        &lt;/p&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;script id=&quot;__NEXT_DATA__&quot; type=&quot;application/json&quot;&gt;
      {
        &quot;props&quot;: {
          &quot;pageProps&quot;: {
            &quot;post&quot;: {
              &quot;userId&quot;: 1,
              &quot;id&quot;: 1,
              &quot;title&quot;: &quot;sunt aut facere repellat provident occaecati excepturi optio reprehenderit&quot;,
              &quot;body&quot;: &quot;quia et suscipit\nsuscipit recusandae consequuntur expedita et cum\nreprehenderit molestiae ut ut quas totam\nnostrum rerum est autem sunt rem eveniet architecto&quot;
            }
          },
          &quot;__N_SSP&quot;: true
        },
        &quot;page&quot;: &quot;/posts-ssr/[id]&quot;,
        &quot;query&quot;: { &quot;id&quot;: &quot;1&quot; },
        &quot;buildId&quot;: &quot;GJy1_82tSFjQEfDSmWtbL&quot;,
        &quot;isFallback&quot;: false,
        &quot;isExperimentalCompile&quot;: false,
        &quot;gssp&quot;: true,
        &quot;scriptLoader&quot;: []
      }
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>[not found image]</p>
<p><code>&quot;__N_SSP&quot;: true</code> 부분과 <code>&quot;gssp&quot;: true,</code>부분에서 SSR이며 <code>getServerSideProps</code>를 사용했음을 알 수 있습니다.</p>
<h2 class="mt-20 text-3xl text-blue-900">Build Result</h2>
<p>빌드 결과입니다.</p>
<p>[not found image]</p>
<p><code>/posts-ssg/[id]</code> 페이지는 <code>(SSG)</code>로, <code>/posts-csr/[id]</code> 페이지는 <code>(Static)</code>으로, <code>/posts-ssr/[id]</code> 페이지는 <code>(Server)</code> 로 생성되었습니다.</p>
<p><code>/posts-csr/[id]</code>의 초기 페이지는 build time에 서버에서 사전 렌더링 되어 static html로 클라이언트 측에 전송되며 이후로는 클라이언트 사이드 렌더링이 진행됩니다. <code>/posts-ssr/[id]</code> 페이지는 runtime 중 request time에 <code>SSR</code> 됩니다.</p>
<h2 class="mt-20 text-3xl text-blue-900">references</h2>
<pre><code>https://nextjs.org/docs/13/pages/building-your-application/data-fetching
https://nextjs.org/docs/13/pages/api-reference/functions
https://nextjs.org/docs/13/pages/building-your-application/routing/dynamic-routes
</code></pre></div></div></div><script src="/_next/static/chunks/webpack-cceda007551b34ac.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/css/ec8169d84bc91095.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"2:I[5751,[],\"\"]\n5:I[9275,[],\"\"]\n7:I[1343,[],\"\"]\n8:I[5767,[\"231\",\"static/chunks/231-6a7b6dfd7bcbf59a.js\",\"185\",\"static/chunks/app/layout-c9173ec0898b2734.js\"],\"PostProvider\",1]\n9:I[231,[\"231\",\"static/chunks/231-6a7b6dfd7bcbf59a.js\",\"185\",\"static/chunks/app/layout-c9173ec0898b2734.js\"],\"\"]\nb:I[6130,[],\"\"]\n6:[\"slug\",\"250417_commit\",\"d\"]\nc:[]\n"])</script><script>self.__next_f.push([1,"0:[\"$\",\"$L2\",null,{\"buildId\":\"zXZxd2y7yPD2GEWj3kSkd\",\"assetPrefix\":\"\",\"urlParts\":[\"\",\"commit-logs\",\"250417_commit\"],\"initialTree\":[\"\",{\"children\":[\"commit-logs\",{\"children\":[[\"slug\",\"250417_commit\",\"d\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":\\\"250417_commit\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"commit-logs\",{\"children\":[[\"slug\",\"250417_commit\",\"d\"],{\"children\":[\"__PAGE__\",{},[[\"$L3\",\"$L4\",null],null],null]},[null,[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"commit-logs\",\"children\",\"$6\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[null,[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"commit-logs\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/ec8169d84bc91095.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"$L8\",null,{\"children\":[\"$\",\"body\",null,{\"children\":[[\"$\",\"nav\",null,{\"className\":\"font-mono mx-16\",\"children\":[\"$\",\"ul\",null,{\"className\":\"relative min-h-32 mt-14 mb-10 mx-2 sm:mx-12 lg:mx-14 flex flex-col md:flex-row md:space-x-12 lg:space-x-16 space-y-1 md:space-y-0 justify-center md:justify-start items-start sm:items-center md:items-center text-2xl md:text-3xl z-0 tracking-tight text-zinc-900 pl-4 sm:pl-0\",\"children\":[[\"$\",\"li\",null,{\"children\":[\"$\",\"$L9\",null,{\"href\":\"/\",\"children\":\"Home\"}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"$L9\",null,{\"href\":\"/learning-logs\",\"children\":\"Learning Logs\"}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"$L9\",null,{\"href\":\"/commit-logs\",\"children\":\"Commit Logs\"}]}]]}]}],[\"$\",\"div\",null,{\"className\":\"flex justify-center py-10\",\"children\":[\"$\",\"div\",null,{\"className\":\"page-background\",\"children\":[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[]}]}]}]]}]}]}]],null],null],\"couldBeIntercepted\":false,\"initialHead\":[null,\"$La\"],\"globalErrorComponent\":\"$b\",\"missingSlots\":\"$Wc\"}]\n"])</script><script>self.__next_f.push([1,"a:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Spaceofin Logs\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"A blog for study logs\"}],[\"$\",\"link\",\"4\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"256x256\"}]]\n3:null\n"])</script><script>self.__next_f.push([1,"d:T4c4,// src/pages/posts-ssg/[id].tsx\nimport { GetStaticProps, GetStaticPaths, InferGetStaticPropsType } from \"next\";\nimport { Post } from \"../types/posts\";\n\nexport const getStaticPaths = (async () =\u003e {\n  const response = await fetch(\"https://jsonplaceholder.typicode.com/posts\");\n  const posts: Post[] = await response.json();\n\n  const paths = posts.map((post) =\u003e ({\n    params: { id: post.id.toString() },\n  }));\n\n  return { paths, fallback: \"blocking\" };\n}) satisfies GetStaticPaths;\n\nexport const getStaticProps = (async (context) =\u003e {\n  const { id } = context.params as { id: string };\n\n  try {\n    const response = await fetch(\n      `https://jsonplaceholder.typicode.com/posts/${id}`\n    );\n    const post = await response.json();\n\n    if (!post) {\n      return {\n        notFound: true,\n      };\n    }\n\n    return {\n      props: { post },\n    };\n  } catch (error) {\n    return {\n      props: {\n        post: null,\n      },\n    };\n  }\n}) satisfies GetStaticProps\u003c{ post: Post }\u003e;\n\nexport default function PostDetail({\n  post,\n}: InferGetStaticPropsType\u003ctypeof getStaticProps\u003e) {\n  if (!post) return \u003cdiv\u003ePost not found\u003c/div\u003e;\n\n  return (\n    \u003cdiv\u003e\n      \u003ch1\u003e{post.title}\u003c/h1\u003e\n      \u003cp\u003e{post.body}\u003c/p\u003e\n    \u003c/div\u003e\n  );\n}\ne:T5b8,\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n  \u003chead\u003e\n    \u003cmeta charset=\"utf-8\" /\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width\" /\u003e\n    \u003cmeta name=\"next-head-count\" content=\"2\" /\u003e\n    \u003ctitle\u003ePage Router Practice\u003c/title\u003e\n    \u003clink ... /\u003e\n    ...\n    \u003cscript ... \u003e\u003c/script\u003e\n    ...\n  \u003c/head\u003e\n  \u003cbody\u003e\n    \u003cdiv id=\"__next\"\u003e\n      \u003cdiv\u003e\n        \u003ch1\u003e\n          sunt aut facere repellat provident occaecati excepturi optio\n          reprehenderit\n        \u003c/h1\u003e\n        \u003cp\u003e\n          quia et suscipit suscipit recusandae consequuntur expedita et cum\n          reprehenderit molestiae ut ut quas totam nostrum rerum est autem sunt\n          rem eveniet architecto\n        \u003c/p\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n    \u003cscript id=\"__NEXT_DATA__\" type=\"application/json\" crossorigin=\"\"\u003e\n      {\n        \"props\": {\n          \"pageProps\": {\n "])</script><script>self.__next_f.push([1,"           \"post\": {\n              \"userId\": 1,\n              \"id\": 1,\n              \"title\": \"sunt aut facere repellat provident occaecati excepturi optio reprehenderit\",\n              \"body\": \"quia et suscipit\\nsuscipit recusandae consequuntur expedita et cum\\nreprehenderit molestiae ut ut quas totam\\nnostrum rerum est autem sunt rem eveniet architecto\"\n            }\n          },\n          \"__N_SSG\": true\n        },\n        \"page\": \"/posts-ssg/[id]\",\n        \"query\": { \"id\": \"1\" },\n        \"buildId\": \"7GLf-bloOy3f3Es1FFa0B\",\n        \"isFallback\": false,\n        \"gsp\": true,\n        \"scriptLoader\": []\n      }\n    \u003c/script\u003e\n  \u003c/body\u003e\n\u003c/html\u003e\nf:T5c9,\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n  \u003chead\u003e\n    \u003cmeta charset=\"utf-8\" /\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width\" /\u003e\n    \u003cmeta name=\"next-head-count\" content=\"2\" /\u003e\n    \u003ctitle\u003ePage Router Practice\u003c/title\u003e\n    \u003clink ... /\u003e\n    ...\n    \u003cscript ...\u003e\u003c/script\u003e\n  \u003c/head\u003e\n  \u003cbody\u003e\n    \u003cdiv id=\"__next\"\u003e\n      \u003cdiv\u003e\n        \u003ch1\u003e\n          sunt aut facere repellat provident occaecati excepturi optio\n          reprehenderit\n        \u003c/h1\u003e\n        \u003cp\u003e\n          quia et suscipit suscipit recusandae consequuntur expedita et cum\n          reprehenderit molestiae ut ut quas totam nostrum rerum est autem sunt\n          rem eveniet architecto\n        \u003c/p\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n    \u003cscript id=\"__NEXT_DATA__\" type=\"application/json\"\u003e\n      {\n        \"props\": {\n          \"pageProps\": {\n            \"post\": {\n              \"userId\": 1,\n              \"id\": 1,\n              \"title\": \"sunt aut facere repellat provident occaecati excepturi optio reprehenderit\",\n              \"body\": \"quia et suscipit\\nsuscipit recusandae consequuntur expedita et cum\\nreprehenderit molestiae ut ut quas totam\\nnostrum rerum est autem sunt rem eveniet architecto\"\n            }\n          },\n          \"__N_SSP\": true\n        },\n        \"page\": \"/posts-ssr/[id]\",\n        \"query\": { \"id\": \"1\" },\n        \"buildId\": \"GJy1_82tSFjQEfDSmWtbL\",\n        \"isFallback\": false,\n        \"isExperimentalCompile\": false,"])</script><script>self.__next_f.push([1,"\n        \"gssp\": true,\n        \"scriptLoader\": []\n      }\n    \u003c/script\u003e\n  \u003c/body\u003e\n\u003c/html\u003e\n"])</script><script>self.__next_f.push([1,"4:[\"$\",\"div\",null,{\"className\":\"flex flex-col prose dark:prose-invert w-full h-full max-h-none overflow-visible px-4\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"my-20 text-4xl\",\"children\":\"Page Router에서의 데이터 페칭 함수들 실습해보기(in Next.js)\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Page Router 방식에서 사용하는 다음의 데이터 페칭 함수들에 대한 실습을 진행합니다.\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"getServerSideProps\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"getStaticProps\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"getStaticPaths\"}]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"getServerSideProps\"}],\"는 \",[\"$\",\"code\",null,{\"children\":\"SSR\"}],\"에, \",[\"$\",\"code\",null,{\"children\":\"getStaticProps\"}],\"와 \",[\"$\",\"code\",null,{\"children\":\"getStaticPaths\"}],\"는 \",[\"$\",\"code\",null,{\"children\":\"SSG\"}],\"에 사용됩니다.\\n\",[\"$\",\"code\",null,{\"children\":\"SSR\"}],\"과의 비교를 위해 \",[\"$\",\"code\",null,{\"children\":\"CSR\"}],\"의 경우도 함께 실습합니다.\"]}],\"\\n\",[\"$\",\"h2\",null,{\"className\":\"mt-20 text-3xl text-blue-900\",\"children\":\"Client Side Rendering(with dynamic routes)\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"page router\"}],\" 방식에서 일반적인 \",[\"$\",\"code\",null,{\"children\":\"Dynamic Routes\"}],\" 구현에 \",[\"$\",\"code\",null,{\"children\":\"useRouter\"}],\"를 사용합니다.\\n아래는 클라이언트 사이드에서의 데이터 페칭을 위해 useEffect 내부에서 fetch 함수를 사용하고 가져온 데이터를 post 상태 변수에 할당하는 코드입니다.\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"// src/pages/posts-csr/[id].tsx\\nimport { useRouter } from \\\"next/router\\\";\\nimport { useEffect, useState } from \\\"react\\\";\\nimport { Post } from \\\"../types/posts\\\";\\n\\nexport default function PostDetail() {\\n  const router = useRouter();\\n  const { id } = router.query;\\n\\n  const [post, setPost] = useState\u003cPost | null\u003e(null);\\n  const [loading, setLoading] = useState(true);\\n\\n  useEffect(() =\u003e {\\n    if (id) {\\n      setLoading(true);\\n      fetch(`https://jsonplaceholder.typicode.com/posts/${id}`)\\n        .then((response) =\u003e response.json())\\n        .then((data) =\u003e {\\n          setPost(data);\\n          setLoading(false);\\n        })\\n        .catch(() =\u003e {\\n          setLoading(false);\\n        });\\n    }\\n  }, [id]);\\n\\n  if (loading) return \u003cdiv\u003eLoading...\u003c/div\u003e;\\n  if (!post) return \u003cdiv\u003ePost not found\u003c/div\u003e;\\n\\n  return (\\n    \u003cdiv\u003e\\n      \u003ch1\u003e{post.title}\u003c/h1\u003e\\n      \u003cp\u003e{post.body}\u003c/p\u003e\\n    \u003c/div\u003e\\n  );\\n}\\n\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"/posts-csr/1\"}],\" 페이지에 접속 시 클라이언트 측에서 서버로부터 전송 받는 html 파일은 아래와 같습니다.\\n\",[\"$\",\"code\",null,{\"children\":\"\u003cdiv\u003eLoading...\u003c/div\u003e\"}],\"만 담겨져 있고 실질적인 데이터는 아직 담겨 있지 않습니다.\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"\u003c!DOCTYPE html\u003e\\n\u003chtml lang=\\\"en\\\"\u003e\\n  \u003chead\u003e\\n    \u003cmeta charset=\\\"utf-8\\\" /\u003e\\n    \u003cmeta name=\\\"viewport\\\" content=\\\"width=device-width\\\" /\u003e\\n    \u003cmeta name=\\\"next-head-count\\\" content=\\\"2\\\" /\u003e\\n    \u003ctitle\u003ePage Router Practice\u003c/title\u003e\\n    \u003clink ... /\u003e\\n    ...\\n    \u003cscript ... \u003e\u003c/script\u003e\\n    ...\\n  \u003c/head\u003e\\n  \u003cbody\u003e\\n\\t  \u003cdiv id=\\\"__next\\\"\u003e\u003cdiv\u003eLoading...\u003c/div\u003e\u003c/div\u003e\\n    \u003cscript id=\\\"__NEXT_DATA__\\\" type=\\\"application/json\\\" crossorigin=\\\"\\\"\u003e\\n      {\\n        \\\"props\\\": { \\\"pageProps\\\": {} },\\n        \\\"page\\\": \\\"/posts-csr/[id]\\\",\\n        \\\"query\\\": {},\\n        \\\"buildId\\\": \\\"7GLf-bloOy3f3Es1FFa0B\\\",\\n        \\\"nextExport\\\": true,\\n        \\\"autoExport\\\": true,\\n        \\\"isFallback\\\": false,\\n        \\\"scriptLoader\\\": []\\n      }\\n    \u003c/script\u003e\\n  \u003c/body\u003e\\n\u003c/html\u003e\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"posts-csr/1\"}],\" 페이지 로드 후 클라이언트 사이드 렌더링이 일어나며 API 로부터 fetch 해온 json 데이터가 화면에 렌더링되었습니다.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"[not found image]\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"[not found image]\"}],\"\\n\",[\"$\",\"h2\",null,{\"className\":\"mt-20 text-3xl text-blue-900\",\"children\":\"Static Site Generation(with dynamic routes)\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"SSG\"}],\" 방식의 Dynamic Routes 구현을 위해서는 \",[\"$\",\"code\",null,{\"children\":\"getStaticProps\"}],\"와 \",[\"$\",\"code\",null,{\"children\":\"getStaticPaths\"}],\"를 함께 사용합니다.\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"$d\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"/posts-ssg/1\"}],\" 페이지에 접속 시 클라이언트 측에서 서버로부터 전송 받는 html 파일은 아래와 같습니다.\\n실질적인 데이터가 이미 html 파일에 담겨 있습니다. \",[\"$\",\"code\",null,{\"children\":\"build time\"}],\"에 미리 정적으로 생성된 페이지입니다.\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"$e\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"[not found image]\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"\\\"__N_SSG\\\": true\"}],\" 부분과 \",[\"$\",\"code\",null,{\"children\":\"\\\"gsp\\\": true,\"}],\"부분에서 SSG이며 \",[\"$\",\"code\",null,{\"children\":\"getStaticProps\"}],\"를 사용했음을 알 수 있습니다.\"]}],\"\\n\",[\"$\",\"h2\",null,{\"className\":\"mt-20 text-3xl text-blue-900\",\"children\":\"Server Side Rendering(with dynamic routes)\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"SSG\"}],\" 방식의 Dynamic Routes 구현을 위해서는 \",[\"$\",\"code\",null,{\"children\":\"getServerSideProps\"}],\"를 사용합니다.\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"import { GetServerSideProps, InferGetServerSidePropsType } from \\\"next\\\";\\nimport { Post } from \\\"../types/posts\\\";\\n\\nexport const getServerSideProps = (async (context) =\u003e {\\n  const { id } = context.params as { id: string };\\n\\n  try {\\n    const response = await fetch(\\n      `https://jsonplaceholder.typicode.com/posts/${id}`\\n    );\\n    const post = await response.json();\\n\\n    if (!post) {\\n      return {\\n        notFound: true,\\n      };\\n    }\\n\\n    return {\\n      props: { post },\\n    };\\n  } catch (error) {\\n    return {\\n      props: {\\n        post: null,\\n      },\\n    };\\n  }\\n}) satisfies GetServerSideProps\u003c{ post: Post }\u003e;\\n\\nexport default function PostDetail({\\n  post,\\n}: InferGetServerSidePropsType\u003ctypeof getServerSideProps\u003e) {\\n  if (!post) return \u003cdiv\u003ePost not found\u003c/div\u003e;\\n\\n  return (\\n    \u003cdiv\u003e\\n      \u003ch1\u003e{post.title}\u003c/h1\u003e\\n      \u003cp\u003e{post.body}\u003c/p\u003e\\n    \u003c/div\u003e\\n  );\\n}\\n\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"/posts-ssr/1\"}],\" 페이지에 접속 시 클라이언트 측에서 서버로부터 전송 받는 html 파일은 아래와 같습니다.\\nSSG 케이스와 마찬가지로 실질적인 데이터가 이미 html 파일에 담겨 있습니다. 하지만 이는 build time에 정적으로 생성된 페이지가 아닙니다. \",[\"$\",\"code\",null,{\"children\":\"request time\"}],\"에 생성되어 서버로부터 전송받은 페이지입니다.\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"$f\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"[not found image]\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"\\\"__N_SSP\\\": true\"}],\" 부분과 \",[\"$\",\"code\",null,{\"children\":\"\\\"gssp\\\": true,\"}],\"부분에서 SSR이며 \",[\"$\",\"code\",null,{\"children\":\"getServerSideProps\"}],\"를 사용했음을 알 수 있습니다.\"]}],\"\\n\",[\"$\",\"h2\",null,{\"className\":\"mt-20 text-3xl text-blue-900\",\"children\":\"Build Result\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"빌드 결과입니다.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"[not found image]\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"/posts-ssg/[id]\"}],\" 페이지는 \",[\"$\",\"code\",null,{\"children\":\"(SSG)\"}],\"로, \",[\"$\",\"code\",null,{\"children\":\"/posts-csr/[id]\"}],\" 페이지는 \",[\"$\",\"code\",null,{\"children\":\"(Static)\"}],\"으로, \",[\"$\",\"code\",null,{\"children\":\"/posts-ssr/[id]\"}],\" 페이지는 \",[\"$\",\"code\",null,{\"children\":\"(Server)\"}],\" 로 생성되었습니다.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"/posts-csr/[id]\"}],\"의 초기 페이지는 build time에 서버에서 사전 렌더링 되어 static html로 클라이언트 측에 전송되며 이후로는 클라이언트 사이드 렌더링이 진행됩니다. \",[\"$\",\"code\",null,{\"children\":\"/posts-ssr/[id]\"}],\" 페이지는 runtime 중 request time에 \",[\"$\",\"code\",null,{\"children\":\"SSR\"}],\" 됩니다.\"]}],\"\\n\",[\"$\",\"h2\",null,{\"className\":\"mt-20 text-3xl text-blue-900\",\"children\":\"references\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"https://nextjs.org/docs/13/pages/building-your-application/data-fetching\\nhttps://nextjs.org/docs/13/pages/api-reference/functions\\nhttps://nextjs.org/docs/13/pages/building-your-application/routing/dynamic-routes\\n\"}]}]]}]\n"])</script></body></html>